---
alwaysApply: true
---
# Obsidian Plugin
- This is an Obsidian plugin: use the latestbuilt-in functions, methods, styles, and components.
- You will use the latest version of the Obsidian API.
- You will use the latest version of the Typescript API.
- Obisdian has built-in is-mobile and is-phone CSS selectors for detecting mobile, prefer that over @media queries.
- Everything must also work on mobile, so don't include NodeJS packages that are desktop only.
- Don't ever run `npm run dev` to build because I am doing that already.

# Coding
- Avoid duplication: check for other areas of the codebase that might already have similar code and functionality.
- Write code that takes into account the different environments: local, test, and prod.
- Careful to only change related to request, not touching other code.
- Never make regression bugs by doing more than asked.
- Recommend common patterns: strategy, mediator, command, singleton.
- Keep the codebase very clean and organized.
- Avoid having files over 200-300 lines of code. Consider a refactor at that point and recommend it.
- Avoid comments that repeat what the code says.

# CSS
- Never place CSS within .ts files, instead use styles.css or other .css files.
- Avoid !important.
- CSS is well organized. Keep it clean.
- Careful to add new CSS elements into the correct section.
- Don't create comments that explain obvious selectors.

# Workflow 
- Do not touch code that is unrelated to the task.
- Don't create regression bugs.